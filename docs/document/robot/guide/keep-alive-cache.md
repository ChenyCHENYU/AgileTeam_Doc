---
outline: 'deep'
---

# Robot Admin è·¯ç”±æ€§èƒ½ä¼˜åŒ–è¯¦è§£

<div class="hero-banner">
  <h2>âš¡ KeepAlive ç¼“å­˜ + æ™ºèƒ½é¢„åŠ è½½</h2>
  <p>æç®€é…ç½®å®ç°é¡µé¢ç§’å¼€ï¼Œæå‡ 60+ å€çš„è·¯ç”±åˆ‡æ¢æ€§èƒ½</p>
</div>

Robot Admin é‡‡ç”¨ **KeepAlive ç¼“å­˜ + é¢„åŠ è½½** åŒé‡ä¼˜åŒ–ç­–ç•¥ï¼Œå®ç°è·¯ç”±åˆ‡æ¢çš„æè‡´æ€§èƒ½ä½“éªŒã€‚æœ¬æ–‡æ¡£å°†è¯¦ç»†ä»‹ç»å¦‚ä½•é€šè¿‡æç®€é…ç½®ï¼Œè®©é¡µé¢å†æ¬¡è®¿é—®æ—¶ä» 200-300ms é™è‡³ <5msï¼Œæå‡ 60+ å€æ€§èƒ½ã€‚

## ğŸ¯ ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

ç³»ç»Ÿé€šè¿‡ä¸¤ç§äº’è¡¥çš„ä¼˜åŒ–ç­–ç•¥ï¼Œè¦†ç›–"é¦–æ¬¡è®¿é—®"å’Œ"å†æ¬¡è®¿é—®"ä¸¤ä¸ªåœºæ™¯ï¼š

| åœºæ™¯                 | ä¼˜åŒ–å‰    | ä¼˜åŒ–å       | æå‡      | ä¼˜åŒ–æ–¹å¼       |
| -------------------- | --------- | ------------ | --------- | -------------- |
| é¦–æ¬¡è®¿é—®æ™®é€šé¡µé¢     | 200-300ms | 200-300ms    | -         | -              |
| é¦–æ¬¡è®¿é—®é¢„åŠ è½½é¡µé¢   | 200-300ms | **50-100ms** | **3-5å€** | èµ„æºé¢„åŠ è½½     |
| **å†æ¬¡è®¿é—®ç¼“å­˜é¡µé¢** | 200-300ms | **<5ms**     | **60å€+** | KeepAlive ç¼“å­˜ |


::: tip ğŸ’¡ æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒ
KeepAlive ç¼“å­˜ç»„ä»¶å®ä¾‹ï¼Œé¢„åŠ è½½æå‰ä¸‹è½½èµ„æºã€‚ä¸¤è€…é…åˆä½¿ç”¨ï¼Œè®©ç”¨æˆ·æ„ŸçŸ¥ä¸åˆ°è·¯ç”±åˆ‡æ¢çš„å»¶è¿Ÿã€‚
:::

## ğŸ—ï¸ ä¼˜åŒ–æ–¹æ¡ˆæ¶æ„

### æ–¹æ¡ˆç»„æˆ

<div class="architecture-grid">
  <div class="arch-card">
    <h4>ğŸ”„ KeepAlive ç¼“å­˜</h4>
    <p>è§£å†³"å†æ¬¡è®¿é—®"é€Ÿåº¦é—®é¢˜</p>
    <ul>
      <li>ç»„ä»¶å®ä¾‹ç¼“å­˜åœ¨å†…å­˜</li>
      <li>å†æ¬¡è®¿é—®ç§’å¼€(<5ms)</li>
      <li>ä¿ç•™çŠ¶æ€å’Œæ»šåŠ¨ä½ç½®</li>
    </ul>
  </div>
  
  <div class="arch-card">
    <h4>ğŸ“¦ æ™ºèƒ½é¢„åŠ è½½</h4>
    <p>è§£å†³"é¦–æ¬¡è®¿é—®"é€Ÿåº¦é—®é¢˜</p>
    <ul>
      <li>é¦–å±ååå°ä¸‹è½½èµ„æº</li>
      <li>é¦–æ¬¡è®¿é—®å¿«(50-100ms)</li>
      <li>ç²¾é€‰5-8ä¸ªæ ¸å¿ƒé¡µé¢</li>
    </ul>
  </div>
</div>

### æ¶æ„ç‰¹ç‚¹

| ç‰¹æ€§         | è¯´æ˜                         | ä»·å€¼           |
| ------------ | ---------------------------- | -------------- |
| **æç®€é…ç½®** | åªéœ€é…ç½® `keepAlive: true`   | é›¶å­¦ä¹ æˆæœ¬     |
| **æ˜ç¡®ç­–ç•¥** | ä¸åšæ™ºèƒ½çŒœæµ‹ï¼Œé¿å…è§„åˆ™å†²çª   | å¯é¢„æµ‹ã€å¯æ§åˆ¶ |
| **è‡ªåŠ¨ç®¡ç†** | è‡ªåŠ¨å¤„ç†ç¼“å­˜ä¸Šé™å’Œå†…å­˜é‡Šæ”¾   | æ— éœ€æ‰‹åŠ¨ç»´æŠ¤   |
| **å¼€å‘å‹å¥½** | æ§åˆ¶å°æ—¥å¿— + window è°ƒè¯•å·¥å…· | å¿«é€Ÿå®šä½é—®é¢˜   |

## ğŸ”„ KeepAlive ç¼“å­˜è¯¦è§£

### æ ¸å¿ƒåŸåˆ™

**æ˜ç¡®é…ç½®ï¼Œé›¶æ„å¤–**

```ts
meta.keepAlive: true   â†’ âœ… ç¼“å­˜
meta.keepAlive: false  â†’ âŒ ä¸ç¼“å­˜
æœªé…ç½® keepAlive       â†’ âŒ ä¸ç¼“å­˜ï¼ˆé»˜è®¤ï¼‰
```

::: warning âš ï¸ è®¾è®¡ç†å¿µ
ç³»ç»Ÿé‡‡ç”¨"æ˜ç¡®é…ç½®"ç­–ç•¥è€Œé"æ™ºèƒ½çŒœæµ‹"ï¼Œé¿å…å¤æ‚çš„ä¼˜å…ˆçº§è§„åˆ™å’Œæ„å¤–çš„ç¼“å­˜è¡Œä¸ºã€‚åªæœ‰æ˜ç¡®é…ç½® `keepAlive: true` çš„é¡µé¢æ‰ä¼šè¢«ç¼“å­˜ã€‚
:::

### é…ç½®æ–¹å¼

åœ¨åç«¯è¿”å›çš„è·¯ç”±æ•°æ®ä¸­æ·»åŠ  `keepAlive` å­—æ®µï¼š

::: code-group

```typescript [åç«¯è·¯ç”±æ•°æ®é…ç½®]
// âœ… æ¨èï¼šæ˜ç¡®æ ‡è®°éœ€è¦ç¼“å­˜çš„é¡µé¢
;[
  {
    path: '/home',
    name: 'Home',
    component: 'home/index',
    meta: {
      title: 'é¦–é¡µ',
      icon: 'mdi:home',
      keepAlive: true, // ğŸ‘ˆ ç¼“å­˜é¦–é¡µ
    },
  },
  {
    path: '/user/list',
    name: 'UserList',
    component: 'user/list',
    meta: {
      title: 'ç”¨æˆ·åˆ—è¡¨',
      icon: 'mdi:account-multiple',
      keepAlive: true, // ğŸ‘ˆ ç¼“å­˜åˆ—è¡¨é¡µ
    },
  },
  {
    path: '/user/form',
    name: 'UserForm',
    component: 'user/form',
    meta: {
      title: 'ç”¨æˆ·è¡¨å•',
      icon: 'mdi:form',
      // âŒ è¡¨å•é¡µä¸é…ç½®ï¼Œé»˜è®¤ä¸ç¼“å­˜
    },
  },
]
```

```vue [C_Layout/index.vue - æç®€å®ç°]
<template>
  <RouterView v-slot="{ Component, route }">
    <Transition
      name="fade-slide"
      mode="out-in"
    >
      <KeepAlive
        :include="cachedViews"
        :max="MAX_CACHE_COUNT"
      >
        <component
          :is="Component"
          :key="route.name"
        />
      </KeepAlive>
    </Transition>
  </RouterView>
</template>

<script setup lang="ts">
  // ç¼“å­˜åˆ¤æ–­åªéœ€ä¸€è¡Œä»£ç 
  const shouldCache = (routeName: string | symbol | undefined | null) => {
    if (!routeName || typeof routeName !== 'string') return false
    return route.meta?.keepAlive === true // ğŸ‘ˆ å”¯ä¸€åˆ¤æ–­æ¡ä»¶
  }
</script>
```

:::

### ç¼“å­˜ç­–ç•¥å»ºè®®

::: code-group

```typescript [âœ… å»ºè®®ç¼“å­˜çš„é¡µé¢]
// 1. åˆ—è¡¨é¡µï¼ˆä¿ç•™æŸ¥è¯¢æ¡ä»¶ã€æ»šåŠ¨ä½ç½®ï¼‰
{
  path: '/user/list',
  meta: {
    title: 'ç”¨æˆ·åˆ—è¡¨',
    keepAlive: true
  }
}

// 2. é¦–é¡µã€ä»ªè¡¨ç›˜ï¼ˆé«˜é¢‘è®¿é—®ï¼‰
{
  path: '/home',
  meta: {
    title: 'é¦–é¡µ',
    keepAlive: true
  }
}
{
  path: '/dashboard',
  meta: {
    title: 'ä»ªè¡¨ç›˜',
    keepAlive: true
  }
}

// 3. è¯¦æƒ…é¡µï¼ˆåªè¯»æ•°æ®ï¼‰
{
  path: '/user/detail',
  meta: {
    title: 'ç”¨æˆ·è¯¦æƒ…',
    keepAlive: true
  }
}

// 4. ç»Ÿè®¡åˆ†æé¡µï¼ˆè®¡ç®—é‡å¤§ï¼‰
{
  path: '/statistics',
  meta: {
    title: 'æ•°æ®ç»Ÿè®¡',
    keepAlive: true
  }
}
```

```typescript [âŒ ä¸å»ºè®®ç¼“å­˜çš„é¡µé¢]
// 1. è¡¨å•é¡µï¼ˆéœ€è¦é‡ç½®çŠ¶æ€ï¼‰
{
  path: '/user/form',
  meta: {
    title: 'ç”¨æˆ·è¡¨å•'
    // ä¸é…ç½® keepAliveï¼Œé»˜è®¤ä¸ç¼“å­˜
  }
}
{
  path: '/user/edit',
  meta: {
    title: 'ç¼–è¾‘ç”¨æˆ·'
    // ä¸é…ç½® keepAlive
  }
}

// 2. å®æ—¶æ•°æ®é¡µï¼ˆéœ€è¦åˆ·æ–°æ•°æ®ï¼‰
{
  path: '/monitor',
  meta: {
    title: 'å®æ—¶ç›‘æ§'
    // ä¸é…ç½® keepAlive
  }
}

// 3. ç™»å½•é¡µï¼ˆæ— éœ€ç¼“å­˜ï¼‰
{
  path: '/login',
  meta: {
    title: 'ç™»å½•'
    // ä¸é…ç½® keepAlive
  }
}
```

:::

## ğŸ“¦ æ™ºèƒ½é¢„åŠ è½½è¯¦è§£

### é¢„åŠ è½½æœºåˆ¶

é¢„åŠ è½½ä½¿ç”¨ `vite-plugin-preloader` æ’ä»¶ï¼Œåœ¨é¦–å±åŠ è½½å®Œæˆåï¼Œåå°è‡ªåŠ¨ä¸‹è½½æŒ‡å®šé¡µé¢çš„ JavaScript èµ„æºï¼š

::: code-group

```typescript [vite.config.ts - é¢„åŠ è½½é…ç½®]
import { preloader } from 'vite-plugin-preloader'

export default defineConfig({
  plugins: [
    preloader({
      // ç²¾é€‰ 5-8 ä¸ªæ ¸å¿ƒé¡µé¢è¿›è¡Œé¢„åŠ è½½
      routes: [
        '/home', // æ ¸å¿ƒé¡µé¢ï¼šé¦–é¡µ
        '/dashboard', // æ ¸å¿ƒé¡µé¢ï¼šä»ªè¡¨ç›˜
        '/demo/13-calendar', // é‡é‡çº§ç»„ä»¶ï¼šæ—¥å†
        '/demo/16-text-editor', // é‡é‡çº§ç»„ä»¶ï¼šå¯Œæ–‡æœ¬ç¼–è¾‘å™¨
        '/demo/29-antv-x6-editor', // é‡é‡çº§ç»„ä»¶ï¼šæµç¨‹å›¾ç¼–è¾‘å™¨
        // å¯æ ¹æ®ä¸šåŠ¡æ·»åŠ  1-2 ä¸ªé«˜é¢‘é¡µé¢
        // '/sys-manage/user-manage',
      ],
    }),
  ],
})
```

```html [æ„å»ºäº§ç‰© - é¢„åŠ è½½æ ‡ç­¾]
<!-- æ„å»ºåä¼šåœ¨ index.html ä¸­è‡ªåŠ¨æ³¨å…¥ -->
<head>
  <!-- å…¶ä»–æ ‡ç­¾... -->

  <!-- é¢„åŠ è½½æ ¸å¿ƒé¡µé¢èµ„æº -->
  <link
    rel="prefetch"
    href="/assets/home-abc123.js"
  />
  <link
    rel="prefetch"
    href="/assets/dashboard-def456.js"
  />
  <link
    rel="prefetch"
    href="/assets/calendar-ghi789.js"
  />
</head>
```

:::

### é¢„åŠ è½½ç­–ç•¥å»ºè®®

| é¡µé¢ç±»å‹           | æ˜¯å¦é¢„åŠ è½½ | åŸå›                       |
| ------------------ | ---------- | ------------------------- |
| **ç™»å½•åé¦–å±é¡µé¢** | âœ… æ˜¯      | ç”¨æˆ·å¤§æ¦‚ç‡ä¼šè®¿é—®          |
| **é«˜é¢‘æ ¸å¿ƒä¸šåŠ¡é¡µ** | âœ… æ˜¯      | æå‡æ ¸å¿ƒæµç¨‹ä½“éªŒ          |
| **é‡é‡çº§ç»„ä»¶é¡µé¢** | âœ… æ˜¯      | chunk > 200KBï¼Œé¦–æ¬¡åŠ è½½æ…¢ |
| **ä½é¢‘åŠŸèƒ½é¡µé¢**   | âŒ å¦      | å¢åŠ é¦–å±åŠ è½½æ—¶é—´          |
| **æ·±å±‚çº§åµŒå¥—é¡µé¢** | âŒ å¦      | è®¿é—®æ¦‚ç‡ä½ï¼Œä¸å€¼å¾—é¢„åŠ è½½  |

::: tip ğŸ’¡ é¢„åŠ è½½æ•°é‡å»ºè®®
æ¨èé¢„åŠ è½½ **5-8 ä¸ªé¡µé¢**ï¼Œå¹³è¡¡é¦–å±åŠ è½½é€Ÿåº¦å’Œé¦–æ¬¡è®¿é—®ä½“éªŒã€‚è¿‡å¤šé¢„åŠ è½½ä¼šæ‹–æ…¢é¦–å±åŠ è½½æ—¶é—´ã€‚
:::

## ğŸš€ å®Œæ•´ä½¿ç”¨æµç¨‹

### æ­¥éª¤ 1ï¼šé…ç½® KeepAlive ç¼“å­˜ç­–ç•¥

ä¿®æ”¹åç«¯è¿”å›çš„è·¯ç”±æ•°æ®ï¼Œç»™éœ€è¦ç¼“å­˜çš„é¡µé¢æ·»åŠ  `keepAlive: true`ï¼š

```typescript
// ç¤ºä¾‹ï¼šåç«¯è·¯ç”±æ¥å£è¿”å›æ•°æ®
const menuData = [
  {
    path: '/home',
    name: 'Home',
    component: 'home/index',
    meta: {
      title: 'é¦–é¡µ',
      icon: 'mdi:home',
      keepAlive: true, // âœ… ç¼“å­˜
    },
  },
  {
    path: '/user',
    name: 'User',
    meta: { title: 'ç”¨æˆ·ç®¡ç†' },
    children: [
      {
        path: 'list',
        name: 'UserList',
        component: 'user/list',
        meta: {
          title: 'ç”¨æˆ·åˆ—è¡¨',
          keepAlive: true, // âœ… ç¼“å­˜
        },
      },
      {
        path: 'form',
        name: 'UserForm',
        component: 'user/form',
        meta: {
          title: 'ç”¨æˆ·è¡¨å•',
          // âŒ ä¸é…ç½®ï¼Œé»˜è®¤ä¸ç¼“å­˜
        },
      },
    ],
  },
]
```

### æ­¥éª¤ 2ï¼šè°ƒæ•´é¢„åŠ è½½é…ç½®ï¼ˆå¯é€‰ï¼‰

æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µï¼Œåœ¨ `vite.config.ts` ä¸­è°ƒæ•´é¢„åŠ è½½åˆ—è¡¨ï¼š

```typescript
preloader({
  routes: [
    // æ ¸å¿ƒé¡µé¢ï¼ˆç™»å½•åå¤§æ¦‚ç‡è®¿é—®ï¼‰
    '/home',
    '/dashboard',

    // é‡é‡çº§ç»„ä»¶é¡µé¢ï¼ˆchunk > 200KBï¼‰
    '/demo/13-calendar', // æ—¥å†ç»„ä»¶
    '/demo/16-text-editor', // å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
    '/demo/29-antv-x6-editor', // æµç¨‹å›¾ç¼–è¾‘å™¨

    // ä¸šåŠ¡é«˜é¢‘é¡µé¢ï¼ˆæ ¹æ®å®é™…æƒ…å†µæ·»åŠ  1-2 ä¸ªï¼‰
    // '/sys-manage/user-manage',
    // '/sys-manage/role-manage',
  ],
})
```

### æ­¥éª¤ 3ï¼šæµ‹è¯•æ•ˆæœ

::: code-group

```bash [å¯åŠ¨å¼€å‘æœåŠ¡å™¨]
npm run dev
```

```log [æ§åˆ¶å°æ—¥å¿—ç¤ºä¾‹]
# è®¿é—®é¦–é¡µ
[KeepAlive] âœ… ç¼“å­˜: Home (1/20)

# åˆ‡æ¢åˆ°ç”¨æˆ·åˆ—è¡¨
[KeepAlive] âœ… ç¼“å­˜: UserList (2/20)

# åˆ‡æ¢åˆ°ä»ªè¡¨ç›˜
[KeepAlive] âœ… ç¼“å­˜: Dashboard (3/20)

# å†æ¬¡å›åˆ°é¦–é¡µ â†’ ç¬é—´æ˜¾ç¤ºï¼ˆ<5msï¼‰
[KeepAlive] ä»ç¼“å­˜æ¢å¤: Home
```

:::

æ‰“å¼€ Chrome DevToolsï¼š

1. **éªŒè¯ KeepAlive**ï¼šåˆ‡æ¢åˆ°å·²è®¿é—®çš„é¡µé¢ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦è¾“å‡º `ä»ç¼“å­˜æ¢å¤`
2. **éªŒè¯é¢„åŠ è½½**ï¼šNetwork é¢æ¿ä¸­ï¼Œé¦–å±åŠ è½½å®Œæˆå 2-3 ç§’ï¼Œä¼šçœ‹åˆ°é¢„åŠ è½½çš„ JS èµ„æºè¯·æ±‚
3. **éªŒè¯æ€§èƒ½**ï¼šå†æ¬¡è®¿é—®ç¼“å­˜é¡µé¢ï¼ŒPerformance é¢æ¿ä¸­æ¸²æŸ“æ—¶é—´åº” <5ms

## ğŸ› ï¸ è°ƒè¯•å·¥å…·

å¼€å‘æ¨¡å¼ä¸‹æä¾›äº† window å…¨å±€è°ƒè¯•æ–¹æ³•ï¼Œæ–¹ä¾¿å¼€å‘å’Œæ’æŸ¥é—®é¢˜ï¼š

::: code-group

```javascript [æ§åˆ¶å°è°ƒè¯•å‘½ä»¤]
// æŸ¥çœ‹å½“å‰ç¼“å­˜çš„é¡µé¢åˆ—è¡¨
window.__getCachedViews__()
// è¿”å›ç¤ºä¾‹ï¼š['Home', 'UserList', 'Dashboard']

// æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
window.__clearCache__()
// è¿”å›ï¼š[KeepAlive] å·²æ¸…ç©ºæ‰€æœ‰ç¼“å­˜

// ç§»é™¤æŒ‡å®šé¡µé¢ç¼“å­˜
window.__removeCache__('Home')
// è¿”å›ï¼š[KeepAlive] å·²ç§»é™¤ç¼“å­˜: Home
```

```typescript [å¼€å‘é…ç½®]
// src/config/keepAliveConfig.ts
export const DEV_CONFIG = {
  enableLog: true, // è¾“å‡ºç¼“å­˜æ—¥å¿—åˆ°æ§åˆ¶å°
  exposeToWindow: true, // æš´éœ²è°ƒè¯•æ–¹æ³•åˆ° window
}

// å…³é—­è°ƒè¯•åŠŸèƒ½
export const DEV_CONFIG = {
  enableLog: false,
  exposeToWindow: false,
}
```

:::

::: warning ğŸ“Œ ç”Ÿäº§ç¯å¢ƒè¯´æ˜
è°ƒè¯•æ–¹æ³•ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹æš´éœ²åˆ° `window`ï¼Œç”Ÿäº§æ„å»ºæ—¶ä¼šè‡ªåŠ¨ç§»é™¤ã€‚æ§åˆ¶å°æ—¥å¿—ä¹Ÿåªåœ¨å¼€å‘ç¯å¢ƒè¾“å‡ºã€‚
:::

## âš™ï¸ é«˜çº§é…ç½®

### è°ƒæ•´æœ€å¤§ç¼“å­˜æ•°é‡

æ ¹æ®é¡¹ç›®è§„æ¨¡å’Œå†…å­˜é™åˆ¶ï¼Œè°ƒæ•´æœ€å¤§ç¼“å­˜é¡µé¢æ•°é‡ï¼š

::: code-group

```typescript [keepAliveConfig.ts]
/**
 * KeepAlive æœ€å¤§ç¼“å­˜æ•°é‡
 * - å°å‹é¡¹ç›®ï¼š10-15 é¡µ
 * - ä¸­å‹é¡¹ç›®ï¼š15-20 é¡µï¼ˆæ¨èï¼‰
 * - å¤§å‹é¡¹ç›®ï¼š20-30 é¡µ
 */
export const MAX_CACHE_COUNT = 20 // é»˜è®¤å€¼
```

:::

### å†…å­˜å ç”¨å‚è€ƒ

| ç¼“å­˜æ•°é‡ | å†…å­˜å ç”¨  | é€‚ç”¨åœºæ™¯         |
| -------- | --------- | ---------------- |
| 10-15    | ~20-50MB  | å°å‹é¡¹ç›®         |
| 15-20    | ~30-80MB  | ä¸­å‹é¡¹ç›®ï¼ˆæ¨èï¼‰ |
| 20-30    | ~40-120MB | å¤§å‹é¡¹ç›®         |

### é¢„åŠ è½½æ•°é‡å¯¹æ¯”

| é¢„åŠ è½½é¡µé¢æ•°    | é¦–å±åŠ è½½æ—¶é—´ | é¦–æ¬¡è®¿é—®è€—æ—¶ | å»ºè®®åœºæ™¯     |
| --------------- | ------------ | ------------ | ------------ |
| 0ä¸ªï¼ˆä¸é¢„åŠ è½½ï¼‰ | ~1.5s        | 200-300ms    | é¦–å±æ€§èƒ½ä¼˜å…ˆ |
| 5ä¸ª             | ~1.8s        | 50-100ms     | **æ¨èé…ç½®** |
| 10ä¸ª            | ~2.2s        | 50-100ms     | æ ¸å¿ƒé¡µé¢å¤š   |
| 20ä¸ª            | ~3.0s        | 50-100ms     | ä¸æ¨è       |

::: tip ğŸ’¡ é…ç½®å»ºè®®
é¢„åŠ è½½ **5-8 ä¸ªé¡µé¢** æ˜¯æœ€ä½³å¹³è¡¡ç‚¹ï¼Œæ—¢ä¸ä¼šæ˜æ˜¾æ‹–æ…¢é¦–å±ï¼Œåˆèƒ½è¦†ç›–æ ¸å¿ƒé«˜é¢‘é¡µé¢ã€‚
:::

## ğŸ”§ å¸¸è§åœºæ™¯å¤„ç†

### åœºæ™¯ 1ï¼šè¡¨å•æäº¤ååˆ·æ–°åˆ—è¡¨é¡µ

**é—®é¢˜æè¿°**ï¼šç”¨æˆ·åœ¨è¡¨å•é¡µæäº¤æ•°æ®åï¼Œè¿”å›åˆ—è¡¨é¡µæ˜¾ç¤ºçš„è¿˜æ˜¯æ—§æ•°æ®ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

::: code-group

```vue [æ–¹æ¡ˆ 1ï¼šç›‘å¬é¡µé¢æ¿€æ´»]
<script setup lang="ts">
  import { onActivated } from 'vue'
  import { getUserList } from '@/api/user'

  // ç»„ä»¶æ¯æ¬¡è¢«æ¿€æ´»æ—¶é‡æ–°è·å–æ•°æ®
  onActivated(() => {
    fetchList()
  })

  const fetchList = async () => {
    const res = await getUserList()
    list.value = res.data
  }
</script>
```

```typescript [æ–¹æ¡ˆ 2ï¼šæäº¤åæ¸…é™¤ç¼“å­˜]
// UserForm.vue - è¡¨å•æäº¤æˆåŠŸå
const handleSubmit = async formData => {
  await createUser(formData)

  // æ¸…é™¤åˆ—è¡¨é¡µç¼“å­˜ï¼Œä¸‹æ¬¡è¿›å…¥ä¼šé‡æ–°åŠ è½½
  window.__removeCache__('UserList')

  router.push('/user/list')
}
```

:::

### åœºæ™¯ 2ï¼šéªŒè¯é¢„åŠ è½½æ˜¯å¦ç”Ÿæ•ˆ

::: code-group

```markdown [éªŒè¯æ­¥éª¤]
1. æ‰“å¼€ Chrome DevTools â†’ Network é¢æ¿
2. åˆ·æ–°é¡µé¢ï¼ˆF5ï¼‰
3. ç­‰å¾… 2-3 ç§’ï¼Œè§‚å¯Ÿ Network é¢æ¿
4. å¦‚æœçœ‹åˆ°é¢„åŠ è½½åˆ—è¡¨ä¸­çš„ JS èµ„æºè¯·æ±‚ â†’ é¢„åŠ è½½å·²ç”Ÿæ•ˆ âœ…
5. ç‚¹å‡»è®¿é—®é¢„åŠ è½½çš„é¡µé¢
6. å¦‚æœæ²¡æœ‰æ–°çš„ JS è¯·æ±‚ â†’ é¢„åŠ è½½æˆåŠŸä½¿ç”¨ âœ…
```

```typescript [è°ƒè¯•æŠ€å·§]
// ä¸´æ—¶ç¦ç”¨é¢„åŠ è½½è¿›è¡Œå¯¹æ¯”æµ‹è¯•
// vite.config.ts
export default defineConfig({
  plugins: [
    // preloader({ routes: [...] }),  // æ³¨é‡Šæ‰
  ],
})

// æµ‹è¯•æµç¨‹ï¼š
// 1. æ³¨é‡Šé¢„åŠ è½½ï¼Œé‡æ–°æ„å»ºï¼Œæµ‹è¯•é¦–æ¬¡è®¿é—®é€Ÿåº¦
// 2. å¯ç”¨é¢„åŠ è½½ï¼Œé‡æ–°æ„å»ºï¼Œå¯¹æ¯”é¦–æ¬¡è®¿é—®é€Ÿåº¦
// 3. ç¡®è®¤é¢„åŠ è½½å¸¦æ¥çš„æ€§èƒ½æå‡
```

:::

### åœºæ™¯ 3ï¼šåŠ¨æ€æ¸…é™¤ç‰¹å®šé¡µé¢ç¼“å­˜

::: code-group

```typescript [ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹]
// ç¤ºä¾‹ 1ï¼šæƒé™å˜æ›´åæ¸…é™¤æƒé™ç›¸å…³é¡µé¢ç¼“å­˜
const handlePermissionChange = () => {
  window.__removeCache__('PermissionList')
  window.__removeCache__('RoleList')
}

// ç¤ºä¾‹ 2ï¼šç”¨æˆ·ç™»å‡ºæ—¶æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
const logout = () => {
  window.__clearCache__()
  router.push('/login')
}

// ç¤ºä¾‹ 3ï¼šå®æ—¶æ•°æ®é¡µæ‰‹åŠ¨åˆ·æ–°
const refreshMonitor = () => {
  window.__removeCache__('Monitor')
  router.go(0) // åˆ·æ–°å½“å‰è·¯ç”±
}
```

:::

## ğŸ“Š æ€§èƒ½æ•°æ®å‚è€ƒ

### å®é™…æµ‹è¯•æ•°æ®

åŸºäº Robot Admin é¡¹ç›®å®æµ‹æ•°æ®ï¼ˆChrome 120ï¼ŒWindows 11ï¼Œ8GB RAMï¼‰ï¼š

| é¡µé¢ç±»å‹       | é¦–æ¬¡è®¿é—® | å†æ¬¡è®¿é—®ï¼ˆç¼“å­˜ï¼‰ | æ€§èƒ½æå‡ |
| -------------- | -------- | ---------------- | -------- |
| é¦–é¡µ           | 220ms    | 3ms              | 73å€     |
| ç”¨æˆ·åˆ—è¡¨       | 280ms    | 4ms              | 70å€     |
| å¯Œæ–‡æœ¬ç¼–è¾‘å™¨   | 450ms    | 5ms              | 90å€     |
| AntV X6 æµç¨‹å›¾ | 520ms    | 6ms              | 86å€     |
| æ—¥å†ç»„ä»¶       | 380ms    | 4ms              | 95å€     |

### é¢„åŠ è½½æ•ˆæœå¯¹æ¯”

| é¡µé¢           | æœªé¢„åŠ è½½ï¼ˆé¦–æ¬¡ï¼‰ | é¢„åŠ è½½ï¼ˆé¦–æ¬¡ï¼‰ | æ€§èƒ½æå‡ |
| -------------- | ---------------- | -------------- | -------- |
| é¦–é¡µ           | 220ms            | 60ms           | 3.6å€    |
| ä»ªè¡¨ç›˜         | 250ms            | 75ms           | 3.3å€    |
| å¯Œæ–‡æœ¬ç¼–è¾‘å™¨   | 450ms            | 120ms          | 3.7å€    |
| AntV X6 æµç¨‹å›¾ | 520ms            | 140ms          | 3.7å€    |
| æ—¥å†ç»„ä»¶       | 380ms            | 95ms           | 4.0å€    |

::: tip ğŸ“ˆ æ€§èƒ½æå‡æ€»ç»“

- **KeepAlive ç¼“å­˜**ï¼šå†æ¬¡è®¿é—®æå‡ **60-90 å€**
- **æ™ºèƒ½é¢„åŠ è½½**ï¼šé¦–æ¬¡è®¿é—®æå‡ **3-5 å€**
- **ç»„åˆä½¿ç”¨**ï¼šé¦–æ¬¡å¿« + å†æ¬¡ç§’å¼€ = **æè‡´ä½“éªŒ**
  :::

## âœ¨ æœ€ä½³å®è·µæ€»ç»“

### é…ç½®æ¸…å•

<div class="checklist">
  <div class="check-item">
    <span class="check-icon">âœ…</span>
    <div>
      <strong>åç«¯è·¯ç”±æ•°æ®ä¸­æ·»åŠ  keepAlive å­—æ®µ</strong>
      <p>ç»™éœ€è¦ç¼“å­˜çš„é¡µé¢æ ‡è®° <code>keepAlive: true</code></p>
    </div>
  </div>
  
  <div class="check-item">
    <span class="check-icon">âœ…</span>
    <div>
      <strong>é…ç½®é¢„åŠ è½½åˆ—è¡¨ï¼ˆ5-8ä¸ªé¡µé¢ï¼‰</strong>
      <p>åœ¨ <code>vite.config.ts</code> ä¸­é…ç½®æ ¸å¿ƒ/é‡é‡çº§é¡µé¢</p>
    </div>
  </div>
  
  <div class="check-item">
    <span class="check-icon">âœ…</span>
    <div>
      <strong>æµ‹è¯•å¹¶éªŒè¯æ•ˆæœ</strong>
      <p>è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ï¼Œä½¿ç”¨ DevTools éªŒè¯æ€§èƒ½æå‡</p>
    </div>
  </div>
  
  <div class="check-item">
    <span class="check-icon">âœ…</span>
    <div>
      <strong>å¤„ç†æ•°æ®åˆ·æ–°åœºæ™¯</strong>
      <p>åœ¨ <code>onActivated</code> ä¸­åˆ·æ–°æ•°æ®æˆ–æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜</p>
    </div>
  </div>
</div>

### æ ¸å¿ƒåŸåˆ™

| åŸåˆ™           | è¯´æ˜                                    | ä»·å€¼           |
| -------------- | --------------------------------------- | -------------- |
| **æ˜ç¡®é…ç½®**   | åªç¼“å­˜æ˜ç¡®æ ‡è®° `keepAlive: true` çš„é¡µé¢ | é¿å…æ„å¤–è¡Œä¸º   |
| **æŒ‰éœ€é¢„åŠ è½½** | åªé¢„åŠ è½½ 5-8 ä¸ªæ ¸å¿ƒ/é‡é‡çº§é¡µé¢          | å¹³è¡¡é¦–å±ä¸ä½“éªŒ |
| **æ•°æ®åˆ·æ–°**   | ç¼“å­˜é¡µé¢åœ¨ `onActivated` ä¸­åˆ·æ–°æ•°æ®     | é¿å…æ˜¾ç¤ºæ—§æ•°æ® |
| **å¼€å‘è°ƒè¯•**   | ä½¿ç”¨ window æ–¹æ³•å’Œæ§åˆ¶å°æ—¥å¿—è°ƒè¯•        | å¿«é€Ÿå®šä½é—®é¢˜   |

::: tip ğŸ¯ ä¼˜åŒ–å»ºè®®
Robot Admin çš„è·¯ç”±æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆé€šè¿‡ **KeepAlive ç¼“å­˜** å’Œ **æ™ºèƒ½é¢„åŠ è½½** ä¸¤ç§æŠ€æœ¯çš„ç»„åˆï¼Œå®ç°äº†é¡µé¢åˆ‡æ¢çš„æè‡´æ€§èƒ½ä½“éªŒã€‚åªéœ€åœ¨åç«¯è·¯ç”±æ•°æ®ä¸­æ·»åŠ  `keepAlive: true`ï¼Œå¹¶åœ¨æ„å»ºé…ç½®ä¸­æŒ‡å®šé¢„åŠ è½½é¡µé¢ï¼Œå³å¯äº«å— 60+ å€çš„æ€§èƒ½æå‡ã€‚
:::

ç³»ç»Ÿçš„è®¾è®¡å“²å­¦æ˜¯"æ˜ç¡®é…ç½®ï¼Œé›¶æ„å¤–"ï¼Œä¸åšä»»ä½•æ™ºèƒ½çŒœæµ‹ï¼Œç¡®ä¿ç¼“å­˜è¡Œä¸ºå®Œå…¨å¯æ§ã€å¯é¢„æµ‹ã€‚å»ºè®®ä¼˜å…ˆç¼“å­˜åˆ—è¡¨é¡µã€é¦–é¡µç­‰é«˜é¢‘è®¿é—®é¡µé¢ï¼Œè¡¨å•é¡µå’Œå®æ—¶æ•°æ®é¡µåˆ™ä¿æŒé»˜è®¤ä¸ç¼“å­˜ã€‚

---

<!-- GitHubå¾½ç« ç»„ä»¶ -->
<GitHubBadges />

<style>
.hero-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  padding: 2.5rem 2rem;
  text-align: center;
  color: white;
  margin: 2rem 0;
}

.hero-banner h2 {
  margin: 0 0 1rem 0;
  font-size: 1.8rem;
  font-weight: bold;
}

.hero-banner p {
  margin: 0;
  font-size: 1.1rem;
  opacity: 0.9;
}

.architecture-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.arch-card {
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  border-radius: 12px;
  padding: 1.5rem;
  border-left: 4px solid #667eea;
}

.arch-card h4 {
  margin: 0 0 0.5rem 0;
  color: #2c3e50;
  font-size: 1.2rem;
}

.arch-card p {
  margin: 0 0 1rem 0;
  color: #4a5568;
  font-size: 0.95rem;
}

.arch-card ul {
  margin: 0;
  padding-left: 1.2rem;
  color: #2d3748;
  font-size: 0.9rem;
}

.arch-card ul li {
  margin: 0.3rem 0;
}

.checklist {
  margin: 1.5rem 0;
}

.check-item {
  display: flex;
  gap: 1rem;
  margin: 1rem 0;
  padding: 1rem;
  background: #f7fafc;
  border-radius: 8px;
  border-left: 3px solid #48bb78;
}

.check-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.check-item strong {
  display: block;
  color: #2d3748;
  margin-bottom: 0.25rem;
}

.check-item p {
  margin: 0;
  color: #4a5568;
  font-size: 0.9rem;
}

@media (max-width: 768px) {
  .hero-banner h2 {
    font-size: 1.5rem;
  }
  
  .architecture-grid {
    grid-template-columns: 1fr;
  }
}
</style>
